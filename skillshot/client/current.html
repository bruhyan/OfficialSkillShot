<template name="current">
  <main>
    <body background= "https://hdwallsource.com/img/2014/5/snow-mountain-wallpaper-16539-17077-hd-wallpapers.jpg">
      <div class="container" style="padding-top : 50px; padding-left: 200px; padding-right: 200px">
        <h1 class="bg-warning" style="text-align:center; margin-bottom: 50px">My Subscribed Projects</h1>
        {{#if Template.subscriptionsReady}}
          {{#each projects}}
              {{> ProjectItem}}
          {{else}}
            <h3>No current project: join a project <a href="/browse"><u><strong>here</strong></u></a></h3>
          {{/each}}
          {{else}}
          <h5>Loading...</h5>
        {{/if}}
      </div>
    </body>
  </main>
</template>

<!--Template for each item to run on current page-->
<template name="ProjectItem">
    <table class="table table-bordered table-light table-hover table-condensed" style="margin-bottom : 100px">
      <thead class="thead-light">
        <tr>
          <th>
            <h4>Project Name:</h4>
          </th>
          <th colspan="2">
            <h5 class="px-2">{{name}}</h5>
          </th>
        </tr>
      </thead>
      {{#if editMode}}
        {{> quickForm collection="Projects" id=updateProjectId type="update" doc=this autosave=true}}
      {{else}}
        <tr>
          <th style="width: 30%">Project Description: </th>
          <td style="width: 70%">{{description}}</td>
        </tr>
        <tr>
          <th>Project Leader:</th>
          <th>{{leader}}</th>
        </tr>
        <tr>
          <th>Contact: </th>
          <td>{{email}}</td>
        </tr>
        <tr>
          <th colspan="3">
              <table class="table" style="margin-top : 20px">
              <thead class="table-info">
                <tr>
                  <th>Skill type</th>
                  <th>Level Req</th>
                  <th>Experience (year(s))</th>
                </tr>
              </thead>
              {{#each requirements}}
                <tr>
                  <td>{{skill_name}}</td>
                  <td>{{level}}</td>
                  <td>{{years_experience}}</td>
                </tr>
              {{/each}}
            </table>
          </th>
        </tr>
        <tr>
          <th class="bg-dark" colspan="3">
            <button class="bg-warning btn-deny toggle-menu">Remove</button>
          </th>
        </tr>
      {{/if}}
    </table>
</template>
